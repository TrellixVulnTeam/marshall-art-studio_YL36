<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="API Guides|Product Definition|Advanced Data Management|ACORD Simplified Programming|ACORD Simplified: A Step by Step Guide">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Sample Simplifications</title>
        <link href="../../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../../Resources/Stylesheets/NewStylesheet.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: #f7f7f8 url('file://vmware-host/Shared Folders/Documents/My Projects/AgencyPortal 5.0/Output/Jami_Delia/Online Output/Website Output/Skins/Default/Stylesheets/Images/left-arrow.png') no-repeat center center;
}

.button.current-topic-index-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.next-topic-button
{
	-pie-background: #f7f7f8 url('file://vmware-host/Shared Folders/Documents/My Projects/AgencyPortal 5.0/Output/Jami_Delia/Online Output/Website Output/Skins/Default/Stylesheets/Images/right-arrow.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../../../../../Resources/Scripts/PIE.htc');
}

</style>
        <script src="../../../../Resources/prettify/run_prettify.js">
        </script>
        <script src="../../../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../../Default.htm#Content/API Guide/Product Definitions/Advanced Data Management/ACORD Simp Pgm/Sample Simplifications.htm">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../../API Guide.htm">API Guides</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../Product Definitions.htm">Product Definition</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Advanced Data Management.htm">Advanced Data Management</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Sample Simplifications</span>
        </div>
        <h1>Sample Simplifications</h1>
        <h2>BlanketInfo</h2>
        <p>Under ACORD&#160;standard, the blanket info illustrates a case where the selected blanket type field not only determines the coverage code on the BlanketInfo, but also has an impact on the number of underlying BlanketTypeCd aggregates you end up with.</p>
        <p>Consider the following interface:</p>
        <p>
            <img src="../../../../../Resources/Images/blanketinterface.jpg" />
        </p>
        <p>Under the ACORD&#160;standard, the resultant XML looks like the following when you select Building from the Blanket Type drop-down menu:</p>
        <p>
            <img src="../../../../../Resources/Images/APconsoleBlanket.jpg" />
        </p>
        <p>Under the ACORD&#160;standard, the resultant XML looks like the following when you select Business Personal Property from the Blanket Type drop-down menu:</p>
        <p>
            <img src="../../../../../Resources/Images/APconsoleBusinessPropertyType.jpg" />
        </p>
        <p>Under ACORD&#160;standard, the resultant XML looks like the following when you select Both from the Blanket Type drop-down menu:</p>
        <p>
            <img src="../../../../../Resources/Images/APconsoleBoth.jpg" />
        </p>
        <p>The ACORD&#160;standard model requires a SFH to maintain the BlanketTypeCd value and the funky cardinality when BOTH&#160;is selected:</p><pre class="prettyprint"><p>&lt;pageElement id="blanket" type="fieldset" legend="Blanket"&gt; 
	&lt;fieldElement type="selectlist"
id="SP.BOPLineBusiness.PropertyInfo.BlanketInfo[BlanketTypeCd='SELECTED']" label="Blanket Type" defaultValue="BOTH"&gt;
	  &lt;optionList reader="xmlreader" source="codeListRef.xml" target="blank" /&gt;
	  &lt;optionList reader="xmlreader" source="bopCodeListRef.xml" target="umbpropertytype" /&gt; 
	&lt;/fieldElement&gt;
	&lt;fieldElement type="text"
id="SP.BOPLineBusiness.PropertyInfo.BlanketInfo[BlanketTypeCd='SELECTED'].Limit.FormatInteger" label="Blanket Limit" size="10" maxLength="14" &gt;
	  &lt;validation type="numeric" id="N177" /&gt;
	  &lt;fieldHelper type="balloon"&gt;This must equal the sum of your blanket types for all locations&lt;/fieldHelper&gt;
    &lt;/fieldElement&gt;
    &lt;/pageElement&gt;</p></pre>
        <p>ACORD&#160;simplified model simplifies things greatly. Under this mode:</p>
        <ul>
            <li value="1">We allow the value from the select list to map directly to the BlanketTypeCd, allowing the value of "BOTH" on the BlanketTypeCd (even though it is not a valid coverage code).</li>
            <li value="2">We get to remove the need for any SFH under the covers as follows:</li>
        </ul><pre class="prettyprint"><p>&lt;pageElement id="blanket" type="fieldset" legend="Blanket"&gt;
  &lt;fieldElement type="selectlist" id="BOPLineBusiness.PropertyInfo.BlanketInfo.BlanketTypeCd"
label="Blanket Type" defaultValue="BOTH" groupId="BOPLineBusiness.PropertyInfo.BlanketInfo"&gt; 
	&lt;optionList reader="xmlreader" source="codeListRef.xml" target="blank" /&gt;
	&lt;optionList reader="xmlreader" source="bopCodeListRef.xml" target="umbpropertytype" /&gt;
  &lt;/fieldElement&gt;
  &lt;fieldElement type="text" id="BOPLineBusiness.PropertyInfo.BlanketInfo.Limit.FormatInteger" label="Blanket Limit" size="10" maxLength="14" &gt;
	&lt;validation type="numeric" id="N177" /&gt;
	&lt;fieldHelper type="balloon"&gt;This must equal the sum of your blanket types for all locations&lt;/fieldHelper&gt;
  &lt;/fieldElement&gt;
&lt;/pageElement&gt;</p></pre>
        <p>Under ACORD simplified, the resultant XML looks like the following when you select Both from the Blanket Type drop-down menu:</p>
        <p>
            <img src="../../../../../Resources/Images/APconsoleBoth2.jpg" />
        </p>
        <p>Now, you just need to write the transformations to/from the ACORD standard representation to deal with how BOTH&#160;is represented on both sides. The following is a Java based transformer to illustrate this use case:</p><pre class="prettyprint"><p>/* 
 *Created on Nov 10, 2011 by nbaker AgencyPort Insurance Services, Inc. 
 */
package com.agencyport.bop.transformers; 
import org.jdom.Element;
import com.agencyport.domXML.APDataCollection;
import com.agencyport.domXML.transform.APDataCollectionTransformationException; import com.agencyport.domXML.transform.IAPDataCollectionTransformer;
import com.agencyport.domXML.transform.TargetFormat;
/**
 * The BlanketInfoTransformer class supports both the ACORD simplified and standard transformations of the BOP 
 * BlanketInfo aggregate.
 */
public class BlanketInfoTransformer implements IAPDataCollectionTransformer {
		private static final String BLANKET_TYPE_CD_XPATH = "BOPLineBusiness.PropertyInfo.BlanketInfo.BlanketTypeCd"; 
		private static final String BOTH = "BOTH";
		private static final String BUILDING = "BLDG";
		private static final String BUILDING_PERSONAL_PROPERTY = "PP";
		/**
		 * Constructs an instance. 
		 */
		public BlanketInfoTransformer() { }
		/**
		 * {@inheritDoc} 
		 */
		public void transform(APDataCollection dataCollection,
							TargetFormat targetFormat, Element customParameters)
							throws APDataCollectionTransformationException { 
							if ( targetFormat.equals(TargetFormat.ACORDSimplified)){
										simplify(dataCollection); 
							}
							else {
										standardize(dataCollection);
							}
}
/**
 * Simplifies the BlanketInfo aggregate.
 * @param dataCollection is the XML to update.
 * @throws APDataCollectionTransformationException */
private void simplify(APDataCollection dataCollection)
			throws APDataCollectionTransformationException {
			if ( dataCollection.getCount(BLANKET_TYPE_CD_XPATH) &gt; 1 ) {
						dataCollection.setFieldValue(BLANKET_TYPE_CD_XPATH, BOTH); 
						dataCollection.deleteElement(BLANKET_TYPE_CD_XPATH, 1);
			}
}
/**
 * Standardizes the BlanketInfo aggregate.
 * @param dataCollection is the XML to update.
 * @throws APDataCollectionTransformationException 
 */
private void standardize(APDataCollection dataCollection) 
throws APDataCollectionTransformationException {
			if ( BOTH.equals(dataCollection.getFieldValue(BLANKET_TYPE_CD_XPATH, null)) ){ 
						dataCollection.setFieldValue(BLANKET_TYPE_CD_XPATH, 0, BUILDING);
						dataCollection.setFieldValue(BLANKET_TYPE_CD_XPATH, 1, BUILDING_PERSONAL_PROPERTY);
			}
	}
}	
</p></pre>
        <div class="buttons inline-buttons clearfix topicToolbarProxy" style="mc-topic-toolbar-items: ;">
            <div class="button-group-container-left">
                <button class="button needs-pie previous-topic-button" type="button" title="Navigate previous">
                    <img src="../../../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                </button>
                <div class="button current-topic-index-button disabled"><span class="sequence-index"></span> of <span class="sequence-total"></span></div>
                <button class="button needs-pie next-topic-button" type="button" title="Navigate next">
                    <img src="../../../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                </button>
            </div>
        </div>
    </body>
</html>