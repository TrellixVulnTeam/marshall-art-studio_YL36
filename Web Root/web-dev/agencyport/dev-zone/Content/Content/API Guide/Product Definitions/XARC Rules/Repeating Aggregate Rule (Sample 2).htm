<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="API Guides|Product Definition|XARC Rules|Example XARC Rules">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Repeating Aggregate Rule (Sample 2)</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/NewStylesheet.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: #f7f7f8 url('file://vmware-host/Shared Folders/Documents/My Projects/AgencyPortal 5.0/Output/Jami_Delia/Online Output/Website Output/Skins/Default/Stylesheets/Images/left-arrow.png') no-repeat center center;
}

.button.current-topic-index-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.next-topic-button
{
	-pie-background: #f7f7f8 url('file://vmware-host/Shared Folders/Documents/My Projects/AgencyPortal 5.0/Output/Jami_Delia/Online Output/Website Output/Skins/Default/Stylesheets/Images/right-arrow.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../../../../Resources/Scripts/PIE.htc');
}

</style>
        <script src="../../../Resources/prettify/run_prettify.js">
        </script>
        <script src="../../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../Default.htm#Content/API Guide/Product Definitions/XARC Rules/Repeating Aggregate Rule (Sample 2).htm">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../API Guide.htm">API Guides</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Product Definitions.htm">Product Definition</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="XARC Rules.htm">XARC Rules</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Repeating Aggregate Rule (Sample 2)</span>
        </div>
        <h1>Repeating Aggregate Rule (Sample 2)</h1>
        <p><b>Rule</b>:</p>
        <p>Only one vehicle per policy can be of usage type "Farm."</p>
        <p><b>Fields</b>:</p>
        <p>Vehicle Usage: PersAutoLineBusiness.PersVeh.VehUseCd</p>
        <p><b>Approach</b>:</p>
        <p>We have to narrow down the vehicles to those that have VehUseCd = 'FM' and then count said vehicles and check if the count is &gt; 1.</p>
        <p>The first condition would check if the vehUseCd = 'FM.' This will remove any vehicles that are not Farm Vehicles. Second condition can count the farm vehicles and check if the count is &gt; 1.</p>
        <p><b>Steps to write this rule</b>:</p>
        <ol>
            <li value="1">Set the page source to the xpath of the aggregate we want to loop over. In this case, "PersAutoLineBusiness.PersVeh."
				<br /><img src="../../../../Resources/Images/aggregate2_xpath_688x256.png" style="width: 688;height: 256;" class="border" /></li>
            <li value="2">Add condition to check whether Usage = 'FM.' This will eliminate all the vehicles that does not have Usage = 'FM.'
				<br /><img src="../../../../Resources/Images/aggregate2_usage_693x265.png" style="width: 693;height: 265;" class="border" /></li>
            <li value="3">Add another condition that does a count (using the count function) of remaining vehicles (you can choose any mandatory field on the vehicle page to count the vehicles) and test whether it is greater than 1. Keep in mind that the conditions are progressive, so the "remaining vehicles"&#160;are those that met the previous condition(s) (in this case Usage of 'FM').
				<br /><img src="../../../../Resources/Images/aggregate2_vehicles_690x211.png" style="width: 690;height: 211;" class="border" /></li>
            <li value="4">Add the message to display with appropriate severity level.
				<br /><img src="../../../../Resources/Images/aggregate2_message_704x256.png" style="width: 704;height: 256;" class="border" /></li>
        </ol>
        <div class="buttons inline-buttons clearfix topicToolbarProxy" style="mc-topic-toolbar-items: ;">
            <div class="button-group-container-left">
                <button class="button needs-pie previous-topic-button" type="button" title="Navigate previous">
                    <img src="../../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                </button>
                <div class="button current-topic-index-button disabled"><span class="sequence-index"></span> of <span class="sequence-total"></span></div>
                <button class="button needs-pie next-topic-button" type="button" title="Navigate next">
                    <img src="../../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                </button>
            </div>
        </div>
    </body>
</html>