<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Getting Started|Search and Filter Setup|SolrManager">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Using SolrManager</title>
        <link href="../../../Resources/TableStyles/Note Table.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/NewStylesheet.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: #f7f7f8 url('file://vmware-host/Shared Folders/Documents/My Projects/AgencyPortal 5.0/Output/Jami_Delia/Online Output/Website Output/Skins/Default/Stylesheets/Images/left-arrow.png') no-repeat center center;
}

.button.current-topic-index-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.next-topic-button
{
	-pie-background: #f7f7f8 url('file://vmware-host/Shared Folders/Documents/My Projects/AgencyPortal 5.0/Output/Jami_Delia/Online Output/Website Output/Skins/Default/Stylesheets/Images/right-arrow.png') no-repeat center center;
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE.htc');
}

</style>
        <script src="../../Resources/prettify/run_prettify.js">
        </script>
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../Default.htm#Content/Getting Started/Search and Filter/Using SolrManager.htm">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../Getting Started.htm">Getting Started</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Search and Filter Setup.htm">Search and Filter Setup</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="SolrManager.htm">SolrManager</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Using SolrManager</span>
        </div>
        <h1>Using SolrManager</h1>
        <p>Use SolrManager to do the following:</p>
        <ul>
            <li value="1"><a href="#Indexing">index</a> <![CDATA[ ]]></li>
            <li value="2"><a href="#Deleting">delete</a>
            </li>
            <li value="3"><a href="#Searchin">search</a>
            </li>
        </ul>
        <h2><a name="Indexing"></a>Indexing</h2>
        <p>To index, there is an index() method that accepts a list of SolrInputDocument instances. These are simple collections of fields with a string ID and string value that model the index. The collection is sent as a whole to Solr for indexing.</p>
        <h2><a name="Deleting"></a>Deleting</h2>
        <p>To delete, provide a list of strings that represent the IDs of the indexed documents to delete. For example, the worklist uses the work item ID as its ID; therefore, to delete work items 1001, 1002 and 1003, provide a list with strings “1001,” “1002” and “1003.”</p>
        <h2><a name="Searchin"></a>Searching</h2>
        <p><i>How do I determine which index is going to be used?</i>
        </p>
        <p>Each call to Solr in SolrManager accepts an indexType parameter. This parameter is used with the configured ISolrResolver instance to produce a URL that points to a Solr index. By default, mappings to account and worklist URLs are supported. For projects that want to use Solr for other features, you must implement ISolrUrlResolver or extend SolrUrlResolver to provide additional mappings to suit their purposes.</p>
        <p><i>Do I need to subclass SolrManager or implement IsolrManager on one of the custom classes?</i>
        </p>
        <p>No; at least not for interacting with Solr. These classes provide fairly generic methods for making calls to Solr; parameters should accommodate any index type.</p>
        <ul>
            <li value="1">The index method accepts a list of SolrInputDocuments, which can contain any fields and are not domain-specific.</li>
            <li value="2">	The search method takes a SolrQuery object, which can also contain any fields and is not domain-specific.</li>
            <li value="3">The delete method takes a list of string IDs. Since all indexes are configured with an index field, this is also not domain-specific.</li>
        </ul>
        <p>You may need to extend ACSI integration. This takes place in the applySecurityFilter method, which accepts a SolrQuery parameter that you can modify.</p>
        <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/Note Table.css');" class="TableStyle-Note_Table" cellspacing="0">
            <col class="TableStyle-Note_Table-Column-Column1" />
            <tbody>
                <tr class="TableStyle-Note_Table-Body-Body1">
                    <td class="TableStyle-Note_Table-BodyA-Column1-Body1">
                        <p class="noteheader">NOTE:</p>
                        <p class="note">If an implementation project decides to override the index/search/delete methods, you must call the following after acquiring the URL&#160;for the desired index:</p>
                        <p class="note"><code>SOLR_Server.setBaseUrl(baseUrl);</code>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>This is performed because the HttpSolrServer is instantiated with a single URL and we want to use it to communicate with multiple URLs. You can:</p>
        <ul>
            <li value="1">Remove the singleton instance and initialize a new HttpSolrServer instance for each call, or</li>
            <li value="2">Reset the base URL that is used with each call. It is more efficient to reset the URL.</li>
        </ul>
        <p><i>How do search/index/delete calls get past the SolrFilter?</i>
        </p>
        <p>When the ISolrManager instance class loads, an instance of HttpSolrServer (the Apache library class that actually does the HTTP communication to the Solr server) is created and configured with the appropriate Solr URL. Each HttpSolrServer instance contains an HttpClient instance.</p>
        <p>Add a Requestinterceptor called APSolrHttpRequestInterceptor. This class is invoked prior to each HTTP request made by HttpClient and attaches the X-Agencyport-Token security header onto the request. The presence of this token satisfies the SolrFilter and lets the request pass through to Solr.</p>
        <p><i>Which framework.properties attributes should I be aware of?</i>
        </p>
        <table style="width: 100%;">
            <col style="width: 208px;" />
            <col />
            <tbody>
                <tr>
                    <td style="text-align: left;vertical-align: top;">
                        <ul>
                            <li value="1">solr_manager</li>
                        </ul>
                    </td>
                    <td>The fully qualified package name for the concrete instance of IsolrManager used in the application. This defaults to com.agencyport.solr.manager.SolrManager.</td>
                </tr>
                <tr>
                    <td style="text-align: left;vertical-align: top;">
                        <ul>
                            <li value="1">solr_url_resolver</li>
                        </ul>
                    </td>
                    <td>This is the fully qualified package name for the concrete instance of ISolrUrlResolver used in the application. This defaults to com.agencyport.solr.manager.SolrUrlResolver.</td>
                </tr>
            </tbody>
        </table>
        <p>
            <img src="../../../Resources/Images/Getting Started/Search and Filter/solrmanagerflowchart_664x450.png" style="width: 664;height: 450;" />
        </p>
        <div class="buttons inline-buttons clearfix topicToolbarProxy" style="mc-topic-toolbar-items: ;">
            <div class="button-group-container-left">
                <button class="button needs-pie previous-topic-button" type="button" title="Navigate previous">
                    <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                </button>
                <div class="button current-topic-index-button disabled"><span class="sequence-index"></span> of <span class="sequence-total"></span></div>
                <button class="button needs-pie next-topic-button" type="button" title="Navigate next">
                    <img src="../../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                </button>
            </div>
        </div>
    </body>
</html>